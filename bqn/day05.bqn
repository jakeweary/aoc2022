util â† â€¢Import "util.bqn"

Rearrange â† {stacksâ€¿instructionsâ€¿F:
  {amountâ€¿sâ€¿d:
    srcâ€¿dst â† sâ€¿dâŠstacks
    stacks âŸ¨amountâ†“src, (F amountâ†‘src)âˆ¾dstâŸ©âŒ¾(sâ€¿dâŠ¸âŠ) â†©
  }Â¨instructions
  stacks
}

Solve â‡ {
  stacksâ€¿instructions â† util.SplitOnEmpty ğ•©
  stacks {{ğ•©â‰¥'A'}âŠ¸/Â¨ {1=4|â†•â‰ ğ•©}âŠ¸/ <Ë˜â‰> 35â†‘Â¨ ğ•©} â†©
  instructions {-âŸœ0â€¿1â€¿1Â¨ util.UIntÂ¨Â¨ {(1=2|â†•â‰ ğ•©)/ğ•©}Â¨ util.SplitOnâŸœ' 'Â¨ ğ•©} â†©

  part1 â† âˆ¾1â†‘Â¨ Rearrange stacksâ€¿instructionsâ€¿âŒ½
  part2 â† âˆ¾1â†‘Â¨ Rearrange stacksâ€¿instructionsâ€¿âŠ¢
  part1â€¿part2
}
