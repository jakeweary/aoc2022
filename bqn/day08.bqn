Solve â‡ {
  trees â† >ğ•©-'0'
  rows â† trees
  cols â† â‰trees

  Map â† {
    heightâ€¿yâ€¿x â† ğ•©
    rowâ€¿col â† âŸ¨yâŠrows, xâŠcolsâŸ©
    lâ€¿r â† âŸ¨âŒ½xâ†‘row, 1â†“xâ†“rowâŸ© # left right
    uâ€¿d â† âŸ¨âŒ½yâ†‘col, 1â†“yâ†“colâŸ© # up down
    is_visible â† height > âŒŠÂ´âŒˆÂ´Â¨lâ€¿râ€¿uâ€¿d
    scenic_score â† Ã—Â´{(â‰ ğ•©)âŒŠ1+âŠ‘ğ•©âŠ1}Â¨ height â‰¤ lâ€¿râ€¿uâ€¿d
    is_visibleâ€¿scenic_score
  }

  Reduce â† {aâ€¿xâ†ğ•¨, bâ€¿yâ†ğ•©, âŸ¨a+b, xâŒˆyâŸ©}

  ReduceÂ´MapÂ¨â¥Š{ğ•©âˆ¾Â¨â†•â‰¢ğ•©} trees
}
